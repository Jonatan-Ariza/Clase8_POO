<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.132/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.132/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
</head>
<body>
  <div id="cesiumContainer"></div>
  <script type="module">
    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI4ZGQ4OWExNS1lYjc3LTQwMGUtOTg5ZS0xZmFiMGRkZTcyNmQiLCJpZCI6MzMxMzYzLCJpYXQiOjE3NTUwNDI1NzB9.Xfp0-64by5VUbkMelK9Mqm7VS5VP8I3b-iaEkTlGua8';

    const viewer = new Cesium.Viewer("cesiumContainer", {
    baseLayer: Cesium.ImageryLayer.fromProviderAsync(
        Cesium.ArcGisMapServerImageryProvider.fromBasemapType(
        Cesium.ArcGisBaseMapType.SATELLITE
        )
    ),
    });  

    viewer.camera.flyTo({
      destination: Cesium.Cartesian3.fromDegrees( -74.16990767158003, 4.634502809320062, 2600),
      orientation: {
        heading: Cesium.Math.toRadians(0.0),
        pitch: Cesium.Math.toRadians(-15.0),
      }
    });

    const buildingTileset = await Cesium.createOsmBuildingsAsync();
    viewer.scene.primitives.add(buildingTileset);  

    // --- Cargar el archivo GeoJSON ---
    const geoJsonDataSource = await Cesium.GeoJsonDataSource.load('Predios_CC.geojson', {
      stroke: Cesium.Color.RED,
      fill: Cesium.Color.YELLOW.withAlpha(0.5),
      strokeWidth: 2,
      clampToGround: true, // Esto asegura que los polígonos se adhieran al terreno 3D
    });
    // Agrega la fuente de datos al visor
    viewer.dataSources.add(geoJsonDataSource);
    // Vuela a la extensión del archivo GeoJSON
    viewer.flyTo(geoJsonDataSource);

  </script>
 </div>
</body>
</html>